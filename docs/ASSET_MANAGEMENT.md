# 静态资源管理功能

## 功能概述

静态资源管理功能允许用户查看、筛选和管理所有已上传到 S3 的静态资源文件（图片、视频、音频、附件等）。

## 主要特性

### 1. 资源列表视图

- **统一管理界面**: 在插件设置中提供"静态资源管理"入口
- **资源统计**: 显示资源总数和总大小
- **列表展示**: 以卡片形式展示所有资源，包含：
  - 文件名
  - 文件大小
  - 所属文档
  - 上传时间
  - S3 存储键名
  - 预览缩略图（图片）

### 2. 筛选功能

#### 文件名搜索
- 在顶部搜索框输入文件名关键词
- 实时过滤匹配的资源
- 支持模糊匹配

#### 按文档筛选
- 下拉框选择特定文档
- 只显示该文档关联的资源
- 文档列表按标题排序

#### 清除筛选
- 一键清除所有筛选条件
- 恢复显示全部资源

### 3. 资源操作

每个资源卡片提供以下操作：

- **预览**: 
  - 图片：弹窗显示大图
  - 视频：内嵌播放器
  - 音频：内嵌播放器
  - 其他文件：在浏览器打开

- **复制链接**: 复制 S3 访问 URL 到剪贴板

- **在浏览器打开**: 在新标签页打开资源

### 4. 资源信息展示

每个资源卡片显示：

- **文件预览**:
  - 图片：80x80 缩略图
  - 其他文件：文件类型图标

- **文件元信息**:
  - 文件名（带 Tooltip）
  - 文件大小（自动单位换算）
  - 所属文档名称
  - 上传时间
  - S3 存储键名（带 Tooltip）

### 5. 文件类型识别

根据 MIME 类型自动识别并显示对应图标：

- 图片：`iconImage`
- 视频：`iconVideo`
- 音频：`iconRecord`
- PDF：`iconPDF`
- 压缩包：`iconZip`
- 文本：`iconFile`
- 其他：`iconFile`

## 使用场景

### 场景一：查看所有已上传资源

1. 打开插件设置
2. 点击"静态资源管理"按钮
3. 浏览所有资源列表

### 场景二：查找特定文件

1. 在搜索框输入文件名关键词
2. 列表实时过滤显示匹配结果

### 场景三：查看某个文档的资源

1. 在"文档筛选"下拉框选择目标文档
2. 列表只显示该文档相关资源

### 场景四：预览资源

1. 点击资源卡片的"预览"按钮
2. 图片/视频/音频在对话框中查看
3. 其他文件类型在浏览器新标签页打开

### 场景五：复制资源链接

1. 点击"复制链接"按钮
2. S3 URL 自动复制到剪贴板
3. 可在其他地方使用该链接

## 技术实现

### 数据来源

- `AssetRecordManager`: 管理资源映射记录
- `ShareRecordManager`: 提供文档标题信息

### 核心组件

- `AssetListView`: 资源列表视图主组件
- 位置：`src/components/asset-list-view.ts`

### 关键功能

1. **资源加载**: 从 `AssetRecordManager` 获取所有映射
2. **筛选逻辑**: 
   - 文件名筛选：字符串包含匹配（不区分大小写）
   - 文档筛选：精确匹配 `docId`
3. **预览功能**: 根据 MIME 类型选择预览方式
4. **文件大小格式化**: 自动转换为合适单位（B/KB/MB/GB/TB）

### 国际化支持

中文（zh_CN）和英文（en_US）完整翻译：

- 界面文本
- 提示信息
- 错误消息
- 按钮标签

### 样式设计

- 响应式布局
- 悬停效果
- 平滑过渡动画
- 滚动条美化

## 注意事项

1. **S3 启用要求**: 功能需要在设置中启用 S3 存储才有数据
2. **权限验证**: 资源访问受 S3 存储桶权限控制
3. **缓存管理**: 记录保存在本地，需手动刷新获取最新数据
4. **性能优化**: 
   - 图片懒加载
   - 列表虚拟滚动（未来优化）
5. **错误处理**: 
   - 图片加载失败显示占位图标
   - 文档不存在显示 ID

## 未来优化方向

1. 批量删除资源
2. 资源统计图表
3. 按大小/时间排序
4. 导出资源清单
5. 资源去重检测
6. 存储空间分析
7. CDN 缓存刷新
8. 资源标签管理
